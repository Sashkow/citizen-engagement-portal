{% extends "base.html" %}
{% load static %}
{% load volunteer_extras %}
{% load static notifications_tags %}

{% block jscripts %}
    <script src="{% static 'volunteer/js/profile.js' %}"></script>
    <script src="{% static 'notifications/notify.js' %}" type="text/javascript"></script>
    <script src="{% static 'volunteer/js/live-test.js' %}" type="text/javascript"></script>
{% endblock %}






{% block menu_item %}
    <li class="nav-item active">
        <a class="nav-link" href="#">Знайти подію<span class="sr-only">(current)</span></a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id = "open-reg-modal">Організувати подію</a>
    </li>
    <li class="nav-item">
        <a class="nav-link " href="#">Новини</a>
    </li>
{% endblock %}

{% block menu_button %}
    <form action="{% url 'logout' %}">
        <button class="btn text-primary-color dark-primary-color my-2 my-sm-0" type="submit">Вийти</button>
    </form>
{% endblock %}

{% block container %}

    {% register_notify_callbacks callbacks='fill_notification_list,fill_notification_badge' fetch=20 refresh_period=5 %}
    Непрочитані сповіщення: {% live_notify_badge %}
    <!--<button onclick='make_notification()'>Створити сповіщення</button>-->
    <button onclick='mark_all_as_read()'>Позначити усе як прочитане</button>
    {% live_notify_list %}
        <div class="row align-self-center"  style="height: 30vh;">
            <div class="profile_info col-md-4 text-center my-auto" style="margin-top: 5vh !important;">
                {% csrf_token %}
                <h2>{{ volunteer.league }}</h2>
                {% if volunteer.photo %}
                <img  src="{{ volunteer.photo.url }}" style="height: 20vh;">
                {% else %}
                <img  src="{% static 'volunteer/images/user_profile_default.png' %}" style="height: 20vh;">
                {% endif %}
                <h1>{{name}}</h1>

                {% for point in user_points %}

                <div class="progress" style="height:3vh">
                    <img  src="{{ point.currency.image.url }}" style="height: 3vh;">
                    <div class="progress-bar" role="progressbar" style="width: {{point.quantity|divide:max_points|multiply:100|to_int}}%" aria-valuenow="{{ point.quantity|divide:max_points|multiply:100}}" aria-valuemin="0" aria-valuemax="{{max_points}}"></div>
                </div>
                {% endfor %}


                <div>
                    <a href="{% url 'profile_edit' %}"> Редагувати профіль</a>
                </div>
                <div>
                    <a href="#">Мої добрі справи</a><br>
                    <a class="my-volonter-events" href="#">Я волонтер</a><br>
                    <a class="my-org-events" href="#">Я організатор</a><br>
                    <a class="news" href="#">Новини</a><br>
                    <a class="news" href="{% url 'achivments' %}">Досягнення</a><br>

                </div>
            </div>

        <div class="col-md-8">
            <div class="row text-center align-items-center" style="height:8vh;
                                                                    border-style:solid;
                                                                    border-width:1px;
                                                                    border-color:#4CAF50;
                                                                    border-bottom-left-radius: 15px;
                                                                    border-bottom-right-radius: 15px;">
                <div class="col-md-4">
                    <div class="dropdown open">
                        <select id="event-type" class="text-center" url_get = "{% url 'type_filter' %}" state = "news">
                            <option type_id = "all_digest">Тип</option>
                           {% for type_ev in types_events %}
                                <option type_id = "{{type_ev.id}}">{{ type_ev.type }}</option>
                            {% endfor %}
                            <option type_id = "all">Всі</option>

                        </select>
                    </div>
                </div>
                <div class="col-md-4">
                    Дата
                </div>
                <div class="col-md-4">
                    <input type="text" placeholder="Пошук">
                </div>
            </div >

            <div class="row">
                <div class="col-md-8">
                     <div class="events-container">
                    {% include 'events_result.html' %}

                     </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                      <div class="input-group date" id="datetimepicker1">
                        <input type="text" class="form-control" />
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                      </div>
                    </div>
            </div>


            </div>

        </div>

        {% include 'modal_event_register.html' %}

{% endblock %}





