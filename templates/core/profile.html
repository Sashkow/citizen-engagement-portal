{% extends "base.html" %}
{% load static %}
{% load volunteer_extras %}
{% load static notifications_tags %}

{% block jscripts %}
    <script src="{% static 'volunteer/js/profile.js' %}"></script>
    <script src="{% static 'volunteer/js/achievements.js' %}"></script>
    <script src="{% static 'notifications/notify.js' %}" type="text/javascript"></script>
    <script src="{% static 'volunteer/js/live-test.js' %}" type="text/javascript"></script>

    <!--<style>-->
        <!--.progress-league:before{-->
            <!--content: url({% static 'volunteer/images/current_progress_state.png' %});-->
            <!--position:relative;-->
            <!--left:{{achieve_quant|divide:league_user.quantity_achievement|multiply:32|to_int}}vh-->
        <!--}-->
    <!--</style>-->
{% endblock %}

{{achieve_quant|divide:league_user.quantity_achievement|to_int}}

{% block menu_button %}
    <form action="{% url 'logout' %}">
        <button class="btn btn-enter" type="submit">вийти</button>
    </form>
{% endblock %}

{% block container %}

    <!--{% register_notify_callbacks callbacks='fill_notification_list,fill_notification_badge' fetch=20 refresh_period=5 %}-->
    <!--Непрочитані сповіщення: {% live_notify_badge %}-->
    <!--&lt;!&ndash;<button onclick='make_notification()'>Створити сповіщення</button>&ndash;&gt;-->
    <!--<button onclick='mark_all_as_read()'>Позначити усе як прочитане</button>-->
    <!--{% live_notify_list %}-->


        <div class="row align-self-center h-100">
            <div class="profile_info col-md-3 text-center align-items-center justify-content-center" style="background-image:url({% static 'volunteer/images/background_plastic.png'%});">
                {% csrf_token %}
                <!--<h2>{{ volunteer.league }}</h2>-->
                <div class="row">
                    <div class="col-md-12">
                        <h3 class="volunteer-name first-name">{{volunteer.first_name}}</h3>
                        <h3 class="volunteer-name">{{volunteer.last_name}}</h3>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <div class="ribbon">
                        <p>{{ volunteer.league }}</p>
                </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 profile-image">
                         <div>
                            <img class="user-league-info league-logo" src="{{league_user.league_image.url}}">
                            {% if volunteer.photo %}
                            <img class="user-league-info photo-frame" src="{{league_user.user_frame.url}}" style="background-image:url({{ volunteer.photo.url }})">
                            {% else %}
                            <img class="user-league-info photo-frame" src="{{league_user.user_frame.url}}" style="background-image:url({% static 'volunteer/images/user_profile_default.png' %}")">
                             {% endif %}
                        </div>
                    </div>

                </div>


                <div class="row justify-content-center">
                    <div class="col-md-9">
                        <div class="own-progress-bar">
                            <div class="own-progress-league" style="width: {{achieve_quant|divide:league_user.quantity_achievement|multiply:100|to_int}}%">
                                <div class="progress_state">
                                    <p class="quant-ach">{{achieve_quant}}</p>
                                    <img class="img_progress_state" src="{% static 'volunteer/images/current_progress_state.png' %}">
                                </div>
                            </div>
                        <p class="text-right" style="margin-right: 0.7vh;">5</p>
                        </div>
                    </div>
                </div>



                    {% for point in user_points %}
                        {% if forloop.first %} <div class="row justify-content-md-center"> {% endif %}
                            <div class="col-md-2">
                                <img  src="{{ point.currency.image.url }}" style="height: 3vh;">
                                <p>{{point.quantity}}</p>
                            </div>
                        {% if forloop.counter|divisibleby:4%} </div><div class="row justify-content-md-center"> {%endif%}
                         {% if forloop.last %}</div>{% endif %}
                    {% endfor %}



               <div class="row profile-menu-item text-left justify-content-md-center">
                    <div class="col-md-8">
                        <p class="item-menu">мої добрі справи</p>
                    </div>
                </div>
                <div class="row profile-menu-item text-left justify-content-md-center current-menu-item">
                    <div class="col-md-8">
                        <p class="new item-menu ">новини</p>
                    </div>
                </div>
                <div class="row profile-menu-item text-left justify-content-md-center">
                    <div class="col-md-8">
                        <p class="get-achievements item-menu" get_url="{% url 'achivments' %}">мої досягнення</p>
                    </div>
                </div>
                <div class="row profile-menu-item text-left justify-content-md-center">
                    <div class="col-md-8">
                        <p class="item-menu" id="open-reg-modal" post_url="{% url 'newevent' %}">організувати подію</p>
                    </div>
                </div>
                <div class="row profile-menu-item text-left justify-content-md-center">
                    <div class="col-md-8">
                        <p  class="item-menu"  >сповіщення</p>

                    </div>
                </div>
                <!--<div>-->
                    <!--<a href="{% url 'profile_edit' %}"> Редагувати профіль</a>-->
                <!--</div>-->
                <!--<div>-->
                    <!--<a href="#">Мої добрі справи</a><br>-->
                    <!--<a class="my-volonter-events" href="#">Я волонтер</a><br>-->
                    <!--<a class="my-org-events" href="#">Я організатор</a><br>-->
                    <!--<a class="news" href="#">Новини</a><br>-->
                    <!--<a class="get-achievements" href="#"     get_url="{% url 'achivments' %}">Досягнення</a><br>-->

                <!--</div>-->
            </div>
            <div class="col-md-9" style="background-color: #f9ffefff;
                                         background-image:url({% static 'volunteer/images/bg_plastic1.png'%});">


       {% include 'events_result.html' %}
            </div>
            </div>

        {% include 'modal_event_register.html' %}

{% endblock %}





